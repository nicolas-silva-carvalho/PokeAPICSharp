@model List<Pokemon>
@{
    ViewData["Title"] = "Home Page";
}

<section>
    <div class="text-center" style="padding: 20px;">
        <h1 class="display-4" style="padding: 15px;">PokeAPI</h1>
        <input id="searchInput" style="padding: 5px; width: 40%; margin-right: 20px" class="form">
        <button id="searchButton" class="btn btn-primary" style="width: 10%; color: rgb(36, 36, 36); font-weight: 400; padding: 10px; box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px; background-image: linear-gradient(to right, #DD5E89 0%, #F7BB97  51%, #DD5E89  100%); border: none">Buscar</button>
        <br>
        <br>
    </div>
    <table class="table">
        <tbody id="pokemonTableBody">
            @foreach (var pokemon in Model)
            {
                if ((Model.IndexOf(pokemon) + 1) % 3 == 1)
                {
                    if (Model.IndexOf(pokemon) != 0)
                    {
                        <tr></tr>
                    }
                }
                <td style="transform: scale(1); transition: transform 0.2s;">
                    <div class="d-flex flex-column align-items-center" style="margin: 1em; background-image: linear-gradient(to right, #ff8177 0%, #ff867a 0%, #ff8c7f 21%, #f99185 52%, #cf556c 78%, #b12a5b 100%); box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;"
                        onmouseover="this.style.transform = 'scale(1.1)';"
                        onmouseout="this.style.transform = 'scale(1)';">
                        <a asp-action="SelectPokemon" asp-route-id="@pokemon.id" class="text-decoration-none" style="padding: 18px;">
                            <span class="mb-2 text-capitalize" style="color: black; font-weight: 500; font-size: 18px">@pokemon.forms[0].name</span>
                            <img src="@pokemon.sprites.front_default" alt="Imagem do Pokémon" />
                        </a>
                    </div>
                </td>

                if ((Model.IndexOf(pokemon) + 1) % 3 == 0 || Model.IndexOf(pokemon) == Model.Count - 1)
                {
                    <tr></tr>
                }
            }
        </tbody>
    </table>
</section>

@* <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    document.getElementById('searchButton').addEventListener('click', function () {
        var searchInput = document.getElementById('searchInput').value;
        var apiUrl = " https://pokeapi.co/api/v2/pokemon/" + searchInput; // Substitua pela URL correta da sua API

        makeApiCall(apiUrl);
    });

    function makeApiCall(apiUrl) {
        debugger
        axios.get(apiUrl)
            .then(function (response) {
                updatePokemonTable(response.data);
            })
            .catch(function (error) {
                console.log(error);
            });
    }

    function updatePokemonTable(pokemonData) {
        var tableBody = document.getElementById('pokemonTableBody');
        tableBody.innerHTML = '';

        pokemonData.forEach(function (pokemon, index) {
            if ((index + 1) % 3 === 1 && index !== 0) {
                tableBody.innerHTML += '<tr></tr>';
            }

            var pokemonHtml = '<td>' +
                '<div class="d-flex flex-column align-items-center" style="background-image: linear-gradient(to right, #ff8177 0%, #ff867a 0%, #ff8c7f 21%, #f99185 52%, #cf556c 78%, #b12a5b 100%); box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;">' +
                '<a asp-action="SelectPokemon" asp-route-id="' + pokemon.id + '" class="text-decoration-none" style="padding: 18px;">' +
                '<span class="mb-2 text-capitalize" style="color: black; font-weight: 500; font-size: 18px">' + pokemon.name + '</span>' +
                '<img src="' + pokemon.image + '" alt="Imagem do Pokémon" />' +
                '</a>' +
                '</div>' +
                '</td>';

            tableBody.innerHTML += pokemonHtml;

            if ((index + 1) % 3 === 0 || index === pokemonData.length - 1) {
                tableBody.innerHTML += '<tr></tr>';
            }
        });
    }
</script> *@
